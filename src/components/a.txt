=== DANH S√ÅCH VIDEO YOUTUBE ===
Ng√†y t·∫£i: 04/11/2025 04:29
==================================================

import React, { useState, useEffect } from 'react';
import notificationService from '../utils/notification';

const NotificationSettings = ({ onClose }) => {
  const [audioEnabled, setAudioEnabled] = useState(false);
  const [notifPermission, setNotifPermission] = useState('default');

  useEffect(() => {
    if ('Notification' in window) {
      setNotifPermission(Notification.permission);
    }
  }, []);

  const handleEnableAudio = async () => {
    try {
      await notificationService.enableAudio();
      setAudioEnabled(true);
      
      // Test sound
      notificationService.playSound();
    } catch (error) {
      console.error('Error enabling audio:', error);
      alert('Kh√¥ng th·ªÉ b·∫≠t √¢m thanh');
    }
  };

  const handleRequestNotification = async () => {
    if ('Notification' in window) {
      const permission = await Notification.requestPermission();
      setNotifPermission(permission);
      
      if (permission === 'granted') {
        notificationService.showNotification('Th√†nh c√¥ng!', 'B·∫°n s·∫Ω nh·∫≠n th√¥ng b√°o khi c√≥ tin m·ªõi');
      }
    }
  };

  return (
    <div className="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 border border-gray-200 max-w-sm z-50">
      <h3 className="font-semibold text-gray-800 mb-3">üîî C√†i ƒë·∫∑t th√¥ng b√°o</h3>
      
      {/* Audio */}
      <div className="mb-3">
        {!audioEnabled ? (
          <button
            onClick={handleEnableAudio}
            className="w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded transition"
          >
            üîä B·∫≠t √¢m thanh th√¥ng b√°o
          </button>
        ) : (
          <div className="flex items-center gap-2 text-green-600">
            <span>‚úÖ</span>
            <span className="text-sm">√Çm thanh ƒë√£ b·∫≠t</span>
          </div>
        )}
      </div>

      {/* Browser Notification */}
      <div>
        {notifPermission === 'default' && (
          <button
            onClick={handleRequestNotification}
            className="w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition"
          >
            üîî Cho ph√©p th√¥ng b√°o tr√¨nh duy·ªát
          </button>
        )}
        {notifPermission === 'granted' && (
          <div className="flex items-center gap-2 text-blue-600">
            <span>‚úÖ</span>
            <span className="text-sm">Th√¥ng b√°o ƒë√£ b·∫≠t</span>
          </div>
        )}
        {notifPermission === 'denied' && (
          <div className="text-xs text-red-600">
            ‚ö†Ô∏è Th√¥ng b√°o b·ªã ch·∫∑n. V√†o Settings tr√¨nh duy·ªát ƒë·ªÉ b·∫≠t l·∫°i.
          </div>
        )}
      </div>

      {(audioEnabled && notifPermission === 'granted') && (
        <button
          onClick={onClose}
          className="w-full mt-3 px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition text-sm"
        >
          ƒê√≥ng
        </button>
      )}
    </div>
  );
};

export default NotificationSettings;

import React, { useState, useEffect } from 'react';
import notificationService from '../utils/notification';

const NotificationSettings = ({ onClose }) => {
  const [audioEnabled, setAudioEnabled] = useState(false);
  const [notifPermission, setNotifPermission] = useState('default');

  useEffect(() => {
    if ('Notification' in window) {
      setNotifPermission(Notification.permission);
    }
  }, []);

  const handleEnableAudio = async () => {
    try {
      await notificationService.enableAudio();
      setAudioEnabled(true);
      
      // Test sound
      notificationService.playSound();
    } catch (error) {
      console.error('Error enabling audio:', error);
      alert('Kh√¥ng th·ªÉ b·∫≠t √¢m thanh');
    }
  };

  const handleRequestNotification = async () => {
    if ('Notification' in window) {
      const permission = await Notification.requestPermission();
      setNotifPermission(permission);
      
      if (permission === 'granted') {
        notificationService.showNotification('Th√†nh c√¥ng!', 'B·∫°n s·∫Ω nh·∫≠n th√¥ng b√°o khi c√≥ tin m·ªõi');
      }
    }
  };

  return (
    <div className="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 border border-gray-200 max-w-sm z-50">
      <h3 className="font-semibold text-gray-800 mb-3">üîî C√†i ƒë·∫∑t th√¥ng b√°o</h3>
      
      {/* Audio */}
      <div className="mb-3">
        {!audioEnabled ? (
          <button
            onClick={handleEnableAudio}
            className="w-full px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded transition"
          >
            üîä B·∫≠t √¢m thanh th√¥ng b√°o
          </button>
        ) : (
          <div className="flex items-center gap-2 text-green-600">
            <span>‚úÖ</span>
            <span className="text-sm">√Çm thanh ƒë√£ b·∫≠t</span>
          </div>
        )}
      </div>

      {/* Browser Notification */}
      <div>
        {notifPermission === 'default' && (
          <button
            onClick={handleRequestNotification}
            className="w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition"
          >
            üîî Cho ph√©p th√¥ng b√°o tr√¨nh duy·ªát
          </button>
        )}
        {notifPermission === 'granted' && (
          <div className="flex items-center gap-2 text-blue-600">
            <span>‚úÖ</span>
            <span className="text-sm">Th√¥ng b√°o ƒë√£ b·∫≠t</span>
          </div>
        )}
        {notifPermission === 'denied' && (
          <div className="text-xs text-red-600">
            ‚ö†Ô∏è Th√¥ng b√°o b·ªã ch·∫∑n. V√†o Settings tr√¨nh duy·ªát ƒë·ªÉ b·∫≠t l·∫°i.
          </div>
        )}
      </div>

      {(audioEnabled && notifPermission === 'granted') && (
        <button
          onClick={onClose}
          className="w-full mt-3 px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition text-sm"
        >
          ƒê√≥ng
        </button>
      )}
    </div>
  );
};

export default NotificationSettings;
